
<div x-data="{
    activeTab: 'ui'
}" class="view-container">
    <!-- Header & Tabs -->
    <div class="view-card !p-0 flex flex-col overflow-hidden">
        <div class="bg-space-900/50 border-b border-space-border px-8 pt-8 pb-0 shrink-0">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-bold text-white flex items-center gap-2">
                    <svg class="w-5 h-5 text-neon-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span x-text="$store.global.t('systemConfig')">System Configuration</span>
                </h3>
            </div>

            <div class="flex gap-6 overflow-x-auto">
                <button @click="activeTab = 'ui'"
                    class="pb-3 border-b-2 transition-colors font-medium text-sm flex items-center gap-2 whitespace-nowrap"
                    :class="activeTab === 'ui' ? 'border-neon-purple text-white' : 'border-transparent text-gray-500 hover:text-gray-300'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                    </svg>
                    <span x-text="$store.global.t('tabInterface')">Interface</span>
                </button>
                <button @click="activeTab = 'models'"
                    class="pb-3 border-b-2 transition-colors font-medium text-sm flex items-center gap-2 whitespace-nowrap"
                    :class="activeTab === 'models' ? 'border-neon-purple text-white' : 'border-transparent text-gray-500 hover:text-gray-300'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                    </svg>
                    <span x-text="$store.global.t('tabModels')">Models</span>
                </button>
                <button @click="activeTab = 'server'"
                    class="pb-3 border-b-2 transition-colors font-medium text-sm flex items-center gap-2 whitespace-nowrap"
                    :class="activeTab === 'server' ? 'border-neon-purple text-white' : 'border-transparent text-gray-500 hover:text-gray-300'">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
                    </svg>
                    <span x-text="$store.global.t('tabServer')">Server</span>
                </button>
            </div>
        </div>

        <!-- Scrollable Content -->
        <div class="p-8 overflow-y-auto flex-1 custom-scrollbar">

            <!-- Tab 1: UI Preferences -->
            <div x-show="activeTab === 'ui'" class="space-y-8 max-w-2xl animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Language -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text text-gray-300" x-text="$store.global.t('language')">Language</span>
                        </label>
                        <div class="join w-full grid grid-cols-3">
                            <button
                                class="join-item btn btn-sm border-space-border/50 bg-space-800 transition-all font-medium"
                                :class="$store.global.lang === 'en'
                                    ? 'bg-neon-purple/20 text-neon-purple border-neon-purple/60 shadow-lg shadow-neon-purple/10'
                                    : 'text-gray-400 hover:text-white hover:bg-space-700 hover:border-space-border'"
                                @click="$store.global.setLang('en')">English</button>
                            <button
                                class="join-item btn btn-sm border-space-border/50 bg-space-800 transition-all font-medium"
                                :class="$store.global.lang === 'zh'
                                    ? 'bg-neon-purple/20 text-neon-purple border-neon-purple/60 shadow-lg shadow-neon-purple/10'
                                    : 'text-gray-400 hover:text-white hover:bg-space-700 hover:border-space-border'"
                                @click="$store.global.setLang('zh')">中文</button>
                            <button
                                class="join-item btn btn-sm border-space-border/50 bg-space-800 transition-all font-medium"
                                :class="$store.global.lang === 'pt'
                                    ? 'bg-neon-purple/20 text-neon-purple border-neon-purple/60 shadow-lg shadow-neon-purple/10'
                                    : 'text-gray-400 hover:text-white hover:bg-space-700 hover:border-space-border'"
                                @click="$store.global.setLang('pt')">Português</button>
                        </div>
                    </div>

                    <!-- Polling Interval -->
                    <div class="form-control">
                        <label class="label">
                            <span class="label-text text-gray-300" x-text="$store.global.t('pollingInterval')">Polling
                                Interval</span>
                            <span class="label-text-alt font-mono text-neon-purple"
                                x-text="$store.settings.refreshInterval + 's'"></span>
                        </label>
                        <div class="flex gap-3 items-center">
                            <input type="range" min="10" max="300" class="custom-range custom-range-purple flex-1"
                                x-model.number="$store.settings.refreshInterval"
                                :style="`background-size: ${($store.settings.refreshInterval - 10) / 2.9}% 100%`"
                                @change="$store.settings.saveSettings(true)"
                                aria-label="Polling interval slider">
                            <input type="number" min="10" max="300"
                                class="input input-sm input-bordered w-20 bg-space-800 border-space-border text-white font-mono text-center"
                                x-model.number="$store.settings.refreshInterval"
                                @change="$store.settings.saveSettings(true)"
                                aria-label="Polling interval value">
                        </div>
                        <div class="w-full flex justify-between text-xs px-2 mt-2 text-gray-600 font-mono">
                            <span>10s</span>
                            <span>300s</span>
                        </div>
                    </div>

                    <!-- Log Buffer -->
                    <div class="form-control col-span-full">
                        <label class="label">
                            <span class="label-text text-gray-300" x-text="$store.global.t('maxDisplayLogs')">Log Buffer
                                Size</span>
                            <span class="label-text-alt font-mono text-neon-purple"
                                x-text="$store.settings.logLimit + ' ' + $store.global.t('lines')"></span>
                        </label>
                        <div class="flex gap-3 items-center">
                            <input type="range" min="500" max="5000" step="500" class="custom-range custom-range-purple flex-1"
                                x-model.number="$store.settings.logLimit"
                                :style="`background-size: ${($store.settings.logLimit - 500) / 45}% 100%`"
                                @change="$store.settings.saveSettings(true)"
                                aria-label="Log buffer size slider">
                            <input type="number" min="500" max="5000" step="500"
                                class="input input-sm input-bordered w-24 bg-space-800 border-space-border text-white font-mono text-center"
                                x-model.number="$store.settings.logLimit"
                                @change="$store.settings.saveSettings(true)"
                                aria-label="Log buffer size value">
                        </div>
                        <div class="w-full flex justify-between text-xs px-2 mt-2 text-gray-600 font-mono">
                            <span>500</span>
                            <span>5000</span>
                        </div>
                    </div>
                </div>

                <div class="divider border-space-border/50"></div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-control bg-space-900/50 p-4 rounded-lg border transition-all duration-300 hover:border-neon-purple/50"
                        :class="$store.settings.showExhausted ? 'border-neon-purple/50 bg-neon-purple/5 shadow-[0_0_15px_rgba(168,85,247,0.1)]' : 'border-space-border/50'">
                        <div class="flex items-center justify-between">
                            <div class="flex flex-col gap-1">
                                <span class="label-text font-medium transition-colors"
                                    :class="$store.settings.showExhausted ? 'text-neon-purple' : 'text-gray-300'"
                                    x-text="$store.global.t('showExhausted')">Show Exhausted Models</span>
                                <span class="text-xs text-gray-500"
                                    x-text="$store.global.t('showExhaustedDesc')">Display models even if they have 0%
                                    remaining quota.</span>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer"
                                    :checked="$store.settings.showExhausted === true"
                                    @change="$store.settings.showExhausted = $event.target.checked; $store.settings.saveSettings(true)"
                                    aria-label="Show exhausted models toggle">
                                <div
                                    class="w-9 h-5 bg-space-800 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-gray-600 after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-neon-purple peer-checked:after:bg-white">
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="form-control bg-space-900/50 p-4 rounded-lg border transition-all duration-300 hover:border-neon-green/50"
                        :class="$store.settings.compact ? 'border-neon-green/50 bg-neon-green/5 shadow-[0_0_15px_rgba(34,197,94,0.1)]' : 'border-space-border/50'">
                        <div class="flex items-center justify-between">
                            <div class="flex flex-col gap-1">
                                <span class="label-text font-medium transition-colors"
                                    :class="$store.settings.compact ? 'text-neon-green' : 'text-